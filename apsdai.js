var Se=Object.defineProperty;var We=(p,s,u)=>s in p?Se(p,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):p[s]=u;var b=(p,s,u)=>(We(p,typeof s!="symbol"?s+"":s,u),u),ce=(p,s,u)=>{if(!s.has(p))throw TypeError("Cannot "+u)};var h=(p,s,u)=>(ce(p,s,"read from private field"),u?u.call(p):s.get(p)),w=(p,s,u)=>{if(s.has(p))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(p):s.set(p,u)},_=(p,s,u,V)=>(ce(p,s,"write to private field"),V?V.call(p,u):s.set(p,u),u);var m=(p,s,u)=>(ce(p,s,"access private method"),u);(function(p,s){typeof exports=="object"&&typeof module<"u"?module.exports=s():typeof define=="function"&&define.amd?define(s):(p=typeof globalThis<"u"?globalThis:p||self,p.ApsdaiInstance=s())})(this,function(){var j,J,B,G,ue,O,de,H,pe,X,fe,Z,he,Q,ge,K,we,ee,ye,E,te,be,D,oe,T,A,q,z,P,me,ie,xe,$,se,x,U,re,ne,ae,ve;"use strict";class p{static getCookie(e){const t=e+"=",i=document.cookie.split(";");for(let n=0;n<i.length;n++){const o=i[n].trim();if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return""}static setCookie(e,t,i=7){const n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);const o="expires="+n.toGMTString();document.cookie=e+"="+t+"; "+o+"; path=/;domain="+(document.domain==="127.0.0.1"?document.domain:"."+document.domain.split(".").slice(-2).join("."))}static urlencode(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}static getRandomString(e){let t="abacdefghjklmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789",i=0,n=t.length-1,o="";e=e||15;let r=0,d;for(;r<e;r++)d=function(l,a){return l(i,n,a,l)}(function(l,a,c,C){let L=Math.floor(Math.random()*(a-l+1)+l),W=t.length-10;return c===0&&L>=W&&(L=C(l,a,c,C)),L},r),o+=t[d];return o}static getBlobUrl(e){if(window.createObjcectURL!=null)return window.createOjcectURL(e);if(window.URL!=null)return window.URL.createObjectURL(e);if(window.webkitURL!=null)return window.webkitURL.createObjectURL(e)}static debounce(e,t){let i=null;return function(){let n=this,o=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(n,o)},t)}}static isEmail(e){return/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)}}class s{}b(s,"DOMAIN",""),b(s,"Authorigin",""),b(s,"option",null),b(s,"isInit",!1);const F=class{static run(e,t){if(h(this,j)==null){let r=document.createElement("div");r.style.cssText=`
    position: fixed;
    top: 40px;
    left: 50%;
    transform: translate(-50%, 0);  
    z-index: 20000000;

          
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;

     color: white;

    
    `,_(this,j,r),document.body.appendChild(r)}let i=document.createElement("div");i.style.cssText=`

    display: inline-block;
    padding: 9px 12px;
    border-radius: 8px;
    box-shadow: 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 9px 28px 8px rgba(0, 0, 0, 0.05);
    pointer-events: all;
    font-size: 14px;
    margin-top: -40px;
    transition: 0.3s;
    opacity: 0;
    z-index: -1;
    `;let n={success:"#67C23A",error:"#F56C6C",warning:"#E6A23C"};i.style.backgroundColor=n[t],i.innerText=e,i.innerText=e,h(this,j).appendChild(i),setTimeout(()=>{i.style.marginTop="10px",i.style.opacity="1",i.style.zIndex=0});let o="inside_box"+Date.now();h(F,B)[o]=m(this,O,de).call(this,i),m(this,G,ue).call(this,i,o)}};let u=F;j=new WeakMap,J=new WeakMap,B=new WeakMap,G=new WeakSet,ue=function(e,t){e.addEventListener("mouseleave",()=>{h(F,B)[t]=m(this,O,de).call(this,e)}),e.addEventListener("mouseenter",()=>{clearTimeout(h(F,B)[t])})},O=new WeakSet,de=function(e){return setTimeout(()=>{e.remove()},h(this,J))},w(u,G),w(u,O),w(u,j,null),w(u,J,3e3),w(u,B,{});function V(k){u.run(k,"success")}function Ce(k){u.run(k,"error")}function Me(k){u.run(k,"warning")}const S={success:V,error:Ce,warning:Me};class Y{static GET(e,t,i=null){return m(this,H,pe).call(this,"GET",e,t,i)}static POST(e,t,i=null){return m(this,H,pe).call(this,"POST",e,t,i)}}H=new WeakSet,pe=function(e,t,i,n={}){return new Promise(function(o,r){n||(n={});try{let d=function(a){Object.keys(a).length>0&&(n.headers=n.headers||{},n.headers={...n.headers,...a})};if(d({Authorigin:s.Authorigin}),!s.DOMAIN){S.error("\u7F3A\u5C11\u8BF7\u6C42\u5730\u5740"),r("\u7F3A\u5C11\u8BF7\u6C42\u5730\u5740");return}const l=new XMLHttpRequest;if(t.startsWith("http")||(t=s.DOMAIN+(t.slice(0,1)==="/"?t:"/"+t)),e==="GET"&&i&&typeof i=="object"?t+="?"+new URLSearchParams(i).toString():e==="POST"&&(i instanceof FormData?i=i:i&&typeof i=="object"?(d({"Content-Type":"application/json"}),i=JSON.stringify(i)):i=null),l.open(e,t),l.onreadystatechange=function(){if(l.readyState===4)if(l.status>=200&&l.status<300){const a=l.responseText;try{let c=JSON.parse(a);c.code===0?o(c):(S.error(c.msg),r(c))}catch{o(a)}}else l.status>0&&r({status:l.status,message:l.statusText})},l.onerror=a=>{r({status:l.status,message:"\u7F51\u7EDC\u9519\u8BEF"})},n!=null&&n.headers)for(let a in n.headers)l.setRequestHeader(a,n.headers[a]);l.send(i)}catch(d){console.error(d),r(d)}})},w(Y,H);const Ne=`.MyWindowClassName{position:fixed;width:var(--MyWindowClassName-icon-width);height:var(--MyWindowClassName-icon-height);inset:auto var(--MyWindowClassName-icon-right) var(--MyWindowClassName-icon-bottom) auto;z-index:20000000;user-select:none}.MyWindowClassName *{font-family:SF UI Text,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,sans-serif!important}.MyWindowClassName>.btn{width:100%;height:100%;cursor:pointer;background-color:var(--MyWindowClassName-theme-color);background-image:var(--MyWindowClassName-icon);background-size:contain;background-repeat:no-repeat;background-position:center;transition:.3s;box-shadow:0 0 10px rgba(from var(--MyWindowClassName-theme-color) r g b / .3);border-radius:50%}.MyWindowClassName>.btn:hover{box-shadow:1px 2px 20px 2px rgba(from var(--MyWindowClassName-theme-color) r g b / .3);transform:scale(1.2)}.MyWindowClassName>.btn.active{background-image:url(https://i-cdn.apsgo.com/cdn/EvdXi1Uj9v43h9rYYAMsMpTobduiA0adkFJLJ5c1.png);background-size:50%}.MyWindowClassName>.main{box-shadow:0 5px 36px #0000002e;position:fixed;width:var(--MyWindowClassName-main-width);height:0;background:#fff;bottom:calc(var(--MyWindowClassName-icon-bottom) + var(--MyWindowClassName-icon-height) + 10px);right:var(--MyWindowClassName-icon-right);border-radius:15px;transition:.3s;opacity:0;overflow:hidden;display:flex;flex-direction:column}.MyWindowClassName>.main>.bg{display:none}.MyWindowClassName>.main>.header{min-height:56px;display:flex;align-items:center;padding:0 10px;background-color:var(--MyWindowClassName-theme-color);color:#fff}.MyWindowClassName>.main>.header>.title{flex:1;font-weight:700;display:flex;align-items:center}.MyWindowClassName>.main>.header>.title>svg.icon{width:20px;transform:rotateX(180deg);margin-left:15px;display:none}.MyWindowClassName>.main>.header>.icon{width:25px;height:25px;margin-right:10px;cursor:pointer}.MyWindowClassName>.main>.header>.icon:hover{background-color:#00000012}.MyWindowClassName>.main>.content{padding:20px 40px 10px;flex:1;line-height:1.3;overflow:auto;background-color:#fff;position:relative}.MyWindowClassName>.main>.content>.title{text-align:center;font-weight:600;font-size:19px;color:var(--MyWindowClassName-theme-color);margin-bottom:15px;margin-top:30px}.MyWindowClassName>.main>.content>.description{padding:0 10px;font-size:15px;color:#888;margin-top:30px}.MyWindowClassName>.main>.content>.input{margin-top:10px}.MyWindowClassName>.main>.content>.input>input,.MyWindowClassName>.main>.content>.input>.describe>textarea{box-sizing:border-box;width:100%;height:40px;margin:10px 0 0;border:0;outline:1px solid #d9d9d9;border-radius:5px;padding:10px;font-size:14px;color:#444;background:#fff}.MyWindowClassName>.main>.content>.input>input::placeholder,.MyWindowClassName>.main>.content>.input>.describe>textarea::placeholder{color:#aaa}.MyWindowClassName>.main>.content>.input>.describe>.textarea-count{line-height:0;transform:translate(-15px,-14px);text-align:right;color:#888;font-size:12px;display:none}.MyWindowClassName>.main>.content>form.input input.error,.MyWindowClassName>.main>.content>form.input textarea.error{outline-color:red}.MyWindowClassName>.main>.content>.input>.describe{line-height:normal;position:relative}.MyWindowClassName>.main>.content>.input>.describe.drag:after{content:"\\8bf7\\5c06\\9700\\8981\\4e0a\\4f20\\7684\\6587\\4ef6\\62d6\\62fd\\5230\\6b64\\5904";position:absolute;inset:0;background:rgba(from var(--MyWindowClassName-theme-color) r g b / .7);margin-top:10px;display:flex;align-items:center;justify-content:center;font-size:21px;border-radius:5px;color:#fff}.MyWindowClassName>.main>.content>.input>.describe>textarea{min-height:100px;min-width:100%;max-width:100%}.MyWindowClassName>.main>.content>.input>.describe>.describe-img{display:flex;flex-wrap:wrap;gap:10px;margin-top:6px}.MyWindowClassName>.main>.content>.input>.describe>.describe-img>.describe-img-item{position:relative;min-width:30px;height:30px;outline:1px solid #ccc;border-radius:5px;font-size:12px;display:flex;align-items:center;justify-content:center;padding:4px;overflow:hidden}.MyWindowClassName>.main>.content>.input>.describe>.describe-img>.describe-img-item.upload-file{cursor:pointer;outline:0;justify-content:flex-start;align-items:flex-start;min-width:auto}.MyWindowClassName>.main>.content>.input>.describe>.describe-img>.describe-img-item>img{width:100%;height:100%;object-fit:cover;border-radius:5px}.MyWindowClassName>.main>.content>.input>.describe>.describe-img>.describe-img-item>.close{position:absolute;top:4px;right:4px;width:16px;height:16px;font-size:14px;font-weight:700;font-style:normal;background:#00000091;color:#fff;display:flex;align-items:center;justify-content:center;border-radius:50%;cursor:pointer;display:none}.MyWindowClassName>.main>.content>.input>.describe>.describe-img>.describe-img-item:hover>.close{display:flex}.MyWindowClassName>.main>.content>.input>.submit{width:100%;height:30px;background-color:var(--MyWindowClassName-theme-color);border:0;border-radius:5px;padding:6px;color:#fff;font-size:15px;font-weight:700;text-align:center;cursor:pointer;margin-top:20px;display:flex;align-items:center;justify-content:center}.MyWindowClassName>.main>.content>.success{position:absolute;inset:0;background:#fff;padding:20px 40px 0;display:flex;align-items:center;flex-direction:column;justify-content:center}.MyWindowClassName>.main>.content>.success>.title{text-align:center;font-size:17px;color:#888;margin-bottom:40px}.MyWindowClassName>.main>.content>.success>.btns{display:flex;justify-content:space-evenly;width:100%}.MyWindowClassName>.main>.content>.success>.btns>.btn{padding:10px;width:40%;text-align:center;border-radius:5px;cursor:pointer;text-decoration:auto;display:flex;align-items:center;justify-content:center;font-size:15px}.MyWindowClassName>.main>.content>.success>.btns>.go{background-color:var(--MyWindowClassName-theme-color);color:#fff}.MyWindowClassName>.main>.content>.success>.btns>.close{color:var(--MyWindowClassName-theme-color);border:1px solid;width:25%}.MyWindowClassName>.main>.content>.input>.submit.loading:after{content:"";width:10px;height:10px;border:2px solid rgba(0,0,0,.1);border-top-color:#fff;border-radius:50%;animation:spin 2s linear infinite;margin:auto 10px;display:inline-block}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.MyWindowClassName>.main>.content>.input>.submit.disabled{opacity:.5;cursor:not-allowed}.MyWindowClassName>.main>.content::-webkit-scrollbar,.MyWindowClassName>.main>.content>.input>.describe>textarea::-webkit-scrollbar{width:6px;height:6px}.MyWindowClassName>.main>.content::-webkit-scrollbar-thumb,.MyWindowClassName>.main>.content>.input>.describe>textarea::-webkit-scrollbar-thumb{background-color:#d9d9d9;border-radius:5px}.MyWindowClassName>.main>.footer{text-align:center;min-height:25px;color:#8f969cad;background-color:#fff;font-size:11px}@media screen and (max-width: 600px){.MyWindowClassName>.main{left:0;right:0;bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;width:auto;opacity:1}.MyWindowClassName>.main.active>.bg{display:block;position:fixed;inset:0;background:#00000040;z-index:-1}.MyWindowClassName>.main.active{height:80%}.MyWindowClassName>.main.active.full-screen{height:100%;border-radius:0}.MyWindowClassName>.main.active.full-screen>.header>.title>svg.icon.enlarge{display:none}.MyWindowClassName>.main.active>.header>.title>svg.icon.enlarge{display:block}.MyWindowClassName>.main.active.full-screen>.header>.title>svg.icon.narrow{display:block}}@media screen and (min-width: 600px){.MyWindowClassName>.main.active{max-height:var(--MyWindowClassName-main-height);height:auto;opacity:1}}
`,f=class{constructor(){}static initialization(){m(this,X,fe).call(this)}};let y=f;X=new WeakSet,fe=function(){this.MyWindowClassName=p.getRandomString(20).toLowerCase();let e=document.createElement("div");e.className=`${this.MyWindowClassName} apsdai-work-order`,m(this,Z,he).call(this,t=>{t=t||{},m(this,Q,ge).call(this,e,t),m(this,ee,ye).call(this,e,t)})},Z=new WeakSet,he=function(e){var t,i;typeof((t=s.option)==null?void 0:t.work_order)=="object"?e((i=s.option)==null?void 0:i.work_order):Y.GET("/api/work_order/embed/config").then(n=>{var o;(n==null?void 0:n.code)==0&&((o=n==null?void 0:n.data)==null?void 0:o.open)&&e(n.data)})},Q=new WeakSet,ge=function(e,t){var o;let i=[`--${this.MyWindowClassName}-main-width: ${t.main_width?"%spx".replace("%s",t.main_width):"400px"}`,`--${this.MyWindowClassName}-main-height: ${t.main_height?"%spx".replace("%s",t.main_height):"700px"}`,`--${this.MyWindowClassName}-icon-width:  ${t.icon_width?"%spx".replace("%s",t.icon_width):"57px"}`,`--${this.MyWindowClassName}-icon-height: ${t.icon_height?"%spx".replace("%s",t.icon_height):"57px"}`,`--${this.MyWindowClassName}-icon-right: ${t.icon_right?"%spx".replace("%s",t.icon_right):"40px"}`,`--${this.MyWindowClassName}-icon-bottom: ${t.icon_bottom?"%spx".replace("%s",t.icon_bottom):"40px"}`,`--${this.MyWindowClassName}-theme-color: ${t.theme_color?"%s".replace("%s",t.theme_color):"#409eff"}`,`--${this.MyWindowClassName}-icon:${t.icon?"url(%s)".replace("%s",t.icon):"url(https://img.alicdn.com/imgextra/i2/O1CN01bYc1m81RrcSAyOjMu_!!6000000002165-54-tps-60-60.apng)"}`],n=function(){var r=document.createElement("style");r.type="text/css",r.innerHTML+=`:root { ${i.join(";")}}`,document.getElementsByTagName("head")[0].appendChild(r)};(o=document==null?void 0:document.styleSheets)!=null&&o.length?n():window.addEventListener("load",function(){n()})},K=new WeakSet,we=function(e,t){let i=t.collect_info;if(i&&Array.isArray(i)){let n="";i.forEach(o=>{n+=` <input type="text"  name="${o.name}" placeholder="${o.name}" required/>`}),n&&e.querySelector(".input").children[0].insertAdjacentHTML("afterEnd",n)}},ee=new WeakSet,ye=function(e,t){var l;e.innerHTML=`
       <div class="btn"></div>
       <div class="main">
        <div class="bg"></div>
        <div class="header">
          <span class="title">
            <span>${t.header||"\u5DE5\u5355"}</span>
            <svg class="icon enlarge" width="10" viewBox="0 0 1024 1024" ><path fill="currentColor"  d="M429.909333 872.789333h-211.2l232.106667-232.106666a43.946667 43.946667 0 1 0-62.208-62.165334L152.746667 814.208v-209.408a43.989333 43.989333 0 0 0-87.978667 0v312.021333c0 24.277333 19.669333 43.946667 43.989333 43.946667h320.981334a43.989333 43.989333 0 0 0 0.128-87.978667zM915.882667 64.853333h-320.981334a43.989333 43.989333 0 0 0 0 87.978667h211.114667L573.866667 384.853333a43.946667 43.946667 0 1 0 62.208 62.208l235.690666-235.733333V420.693333a43.989333 43.989333 0 0 0 87.978667 0V108.714667a43.818667 43.818667 0 0 0-43.904-43.946667z" fill="#595959" p-id="7539"></path></svg>
            <svg class="icon narrow" width="10"  viewBox="0 0 1024 1024" ><path fill="currentColor" d="M72.145455 660.154182H302.545455L49.338182 913.221818a47.941818 47.941818 0 1 0 67.863273 67.863273l257.11709-257.117091v228.445091a47.988364 47.988364 0 0 0 96.023273 0v-340.386909c0-26.530909-21.504-47.988364-48.034909-47.988364H72.145455a47.988364 47.988364 0 0 0 0 96.116364zM602.298182 459.403636h350.208a47.988364 47.988364 0 0 0 0-95.976727h-230.306909l253.207272-253.207273A47.941818 47.941818 0 1 0 907.543273 42.356364l-257.210182 257.117091V71.074909a47.988364 47.988364 0 0 0-96.023273 0v340.340364c0 26.530909 21.504 47.988364 48.034909 47.988363z" fill="#595959" p-id="726"></path></svg>
          </span>
          <svg class="icon close" width="10" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" ><path fill="currentColor" d="M567.68 511.914667l254.805333-254.634667a39.253333 39.253333 0 0 0 0-55.594667 39.253333 39.253333 0 0 0-55.594666 0L512 456.192 257.109333 201.6a39.253333 39.253333 0 0 0-55.594666 0 39.253333 39.253333 0 0 0 0 55.594667l254.805333 254.592-254.805333 254.72a39.253333 39.253333 0 0 0 27.776 67.072c10.112 0 20.096-3.797333 27.818666-11.477334L512 567.509333l254.890667 254.72c7.68 7.68 17.706667 11.477333 27.818666 11.477334a39.253333 39.253333 0 0 0 27.818667-67.114667l-254.848-254.72z" fill="#595959" p-id="792"></path></svg>
        </div>
        <div class="content">
          <div class="title" >${t.title||""}</div>
          <div class="description" >${t.description||""}</div>
          <form class="input">
             <input type="email"  name="email" placeholder="\u90AE\u7BB1" required/>
             <div class="describe" >
               <textarea type="email" name="describe"  placeholder="\u8BF7\u8BE6\u7EC6\u63CF\u8FF0\u60A8\u7684\u95EE\u9898\uFF0C\u4E5F\u53EF\u7C98\u8D34\u622A\u56FE\u6216\u62D6\u62FD\u6587\u4EF6\u8865\u5145\u4FE1\u606F\u3002" maxlength="400"  required></textarea>
               <div class="textarea-count">0/400</div>
               <div class="describe-img"></div>
             </div>
             <div class="submit disabled">\u63D0\u4EA4</div>
             <a target="_blank" href ="https://www.apsdai.com/client" style="font-size: 12px; color: #888; margin-top: 10px; text-align: center; text-decoration: underline;display: block;margin-bottom: 25px;">\u67E5\u770B\u5DE5\u5355\u72B6\u6001</a>
          </form>
        </div>
        <div class="footer"> ${t.copyright||""} </div>
       </div>
    `,m(this,K,we).call(this,e,t),m(this,P,me).call(this,e);let i=e.querySelector(".btn"),n=e.querySelector(".main");t.open===2&&(i.style.display="none"),f.openTickets=function(){var a;m(a=f,T,A).call(a,i,n)},e.children[0].addEventListener("click",function(){var a;m(a=f,T,A).call(a,i,n)}),e.querySelector(".main>.header>.close").addEventListener("click",function(){var a;m(a=f,T,A).call(a,i,n)}),e.querySelector(".main>.bg").addEventListener("click",function(){var a;m(a=f,T,A).call(a,i,n)}),e.querySelectorAll(".main>.header>.title>svg.icon").forEach(a=>{a.addEventListener("click",function(){n.classList.toggle("full-screen")})});let o=e.querySelector(".input>.describe");o.addEventListener("paste",function(a){var c;m(c=f,$,se).call(c,a)}),o.addEventListener("drop",function(a){var c;o.classList.remove("drag"),a.preventDefault(),m(c=f,$,se).call(c,a)}),document.addEventListener("drop",function(a){o.classList.remove("drag"),a.preventDefault()}),document.addEventListener("dragleave",function(a){a.currentTarget.contains(a.relatedTarget)||o.classList.remove("drag"),a.preventDefault()}),document.addEventListener("dragover",function(a){o.classList.add("drag"),a.preventDefault()}),e.querySelector(".input>.describe>textarea").addEventListener("input",function(a){let c=a.target.value.length,C=a.target.maxLength,L=`${c}/${C}`,W=a.target.parentNode.querySelector(".textarea-count");W.style.display="block",W.innerHTML=L});let r=e.querySelector("form.input");e.querySelectorAll("form.input input,form.input textarea").forEach(a=>{var c,C;a.addEventListener("input",p.debounce(m(c=f,D,oe).call(c,r),200)),a.addEventListener("blur",p.debounce(m(C=f,D,oe).call(C,r),200))}),e.querySelector("form.input>.submit").addEventListener("click",p.debounce(m(l=f,te,be).call(l,r,function(){let a=document.createElement("div");a.className="success",a.innerHTML=`<div class="title">\u60A8\u7684\u95EE\u9898\u5DF2\u6210\u529F\u63D0\u4EA4\uFF0C\u6211\u4EEC\u4F1A\u5C3D\u5FEB\u56DE\u590D\u3002</div>
      <div class="btns">
        <div class="btn close">\u5173\u95ED</div>
        <a class="btn go" >\u67E5\u770B\u5DE5\u5355</a> 
      </div>`,a.querySelector(".close").addEventListener("click",function(){var c;m(c=f,T,A).call(c,i,n)}),a.querySelector(".go").addEventListener("click",function(){var c;m(c=f,T,A).call(c,i,n),window.open("https://www.apsdai.com/client")}),n.querySelector(".content").appendChild(a)}),200)),document.body.appendChild(e);let d=document.createElement("style");d.innerHTML=Ne.replaceAll("MyWindowClassName",this.MyWindowClassName),document.head.appendChild(d)},E=new WeakMap,te=new WeakSet,be=function(e,t=null){return function(){var i;m(i=f,D,oe).call(i,e)(null).then(n=>{if(h(f,E))return;_(f,E,!0);let o={email:n.email.toLowerCase(),describe:n.describe};if(delete n.email,delete n.describe,Object.keys(n).length&&(o.collect_info={},Object.keys(n).forEach(d=>{o.collect_info[d]=n[d]})),h(f,x).length){let d=new FormData;for(const l in o)o[l]instanceof Object?d.append(l,JSON.stringify(o[l])):d.append(l,o[l]);h(f,x).forEach(l=>{d.append("attachment",l.obj)}),o=d}let r=d=>{let l=e.querySelector("form.input>.submit");d==!0?(l.classList.add("loading"),l.classList.add("disabled")):(l.classList.remove("loading"),l.classList.remove("disabled"))};r(h(f,E)),Y.POST("/api/work_order/embed/submit",o).then(d=>{var l;d.code==0?(_(f,x,[]),m(l=f,U,re).call(l),e.reset(),t instanceof Function&&t()):S.error("\u63D0\u4EA4\u5931\u8D25")}).catch(d=>{console.error(d),S.error("\u63D0\u4EA4\u5931\u8D25")}).finally(()=>{_(f,E,!1),r(h(f,E))})}).catch(n=>{var o,r;(o=n==null?void 0:n[0])!=null&&o.message||console.error(n),S.error(((r=n==null?void 0:n[0])==null?void 0:r.message)||"\u63D0\u4EA4\u5931\u8D25")})}},D=new WeakSet,oe=function(e){return function(t){return new Promise((i,n)=>{let o=[];t?o=[t.target]:o=e.querySelectorAll("input,textarea");let r={},d=[];for(let a=0;a<o.length;a++){const c=o[a];c.type==="email"&&!p.isEmail(c.value)?(c.classList.add("error"),d.push({name:c.name,message:c.value?"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E":"\u90AE\u7BB1\u4E0D\u80FD\u4E3A\u7A7A"})):c.type==="text"&&!c.value?(c.classList.add("error"),d.push({name:c.name,message:c.name+"\u4E0D\u80FD\u4E3A\u7A7A"})):c.type==="textarea"&&!c.value?(c.classList.add("error"),d.push({name:c.name,message:"\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A"})):(c.classList.remove("error"),r[c.name]=c.value)}o=e.querySelectorAll("input,textarea");let l=!1;for(let a=0;a<o.length;a++){const c=o[a];if(c.classList.contains("error")||!c.value){l=!0;break}}l?(e.querySelector("form.input>.submit").classList.add("disabled"),n(d)):(e.querySelector("form.input>.submit").classList.remove("disabled"),i(r))})}},T=new WeakSet,A=function(e,t){t.classList.remove("full-screen"),t.classList.contains("active")?(t.classList.remove("active"),e.classList.remove("active")):(t.classList.add("active"),e.classList.add("active"));let i=t.querySelector(".success");i&&i.remove()},q=new WeakMap,z=new WeakMap,P=new WeakSet,me=function(e=null){if(!h(this,z)){let t=document.createElement("div");t.className="describe-img-item upload-file",t.innerHTML='<svg color="#ccc" width="20" viewBox="0 0 1024 1024"><path fill="currentColor" d="M830.421333 237.909333c-29.333333-32-82.282667-33.962667-117.589333 1.322667l-345.6 345.6c-8.938667 8.96-8.938667 20.330667 0 29.269333 8.96 8.938667 20.330667 8.938667 29.269333 0l285.866667-285.866666a42.666667 42.666667 0 0 1 60.330667 60.330666l-285.866667 285.866667c-42.24 42.261333-107.669333 42.261333-149.930667 0-42.261333-42.24-42.261333-107.669333 0-149.930667l345.6-345.6c66.88-66.88 175.573333-69.056 240.192 0.64 66.218667 66.922667 68.181333 175.082667-1.28 239.509334l-404.693333 404.714666c-93.482667 93.461333-239.957333 93.461333-333.44 0-93.44-93.44-93.44-239.936 0-333.397333l345.6-345.6a42.666667 42.666667 0 1 1 60.373333 60.330667l-345.6 345.6c-60.16 60.16-60.16 152.597333 0 212.736 60.117333 60.138667 152.576 60.138667 212.693334 0l405.333333-405.333334 1.344-1.28c32-29.333333 33.962667-82.282667-1.322667-117.589333a44.586667 44.586667 0 0 1-1.28-1.344z" fill="#000000" p-id="2126"></path></path></svg>',t.addEventListener("click",function(i){var n;m(n=f,ie,xe).call(n,i)}),_(this,z,t)}e?e.querySelector(".describe-img").appendChild(h(this,z)):document.querySelector(`.${this.MyWindowClassName} .describe-img`).appendChild(h(this,z))},ie=new WeakSet,xe=function(){let e=document.createElement("input");e.type="file",e.accept=".pdf,.jpg,.png,.jpeg,.gif,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.rar,.7z",e.multiple=!0,e.onchange=function(t){var i;m(i=f,$,se).call(i,t)},e.click()},$=new WeakSet,se=function(e){var d,l,a,c,C,L,W,R;let t=[];if((l=(d=e==null?void 0:e.target)==null?void 0:d.files)!=null&&l.length?t=e.target.files:(c=(a=e==null?void 0:e.clipboardData)==null?void 0:a.files)!=null&&c.length?t=e.clipboardData.files:(L=(C=e==null?void 0:e.dataTransfer)==null?void 0:C.files)!=null&&L.length&&(t=e.dataTransfer.files),(R=(W=e==null?void 0:e.target)==null?void 0:W.files)!=null&&R.length||(t=Array.from(t).filter(v=>{let g=v.type.toLowerCase();return["application/pdf","application/x-zip-compressed","image/jpeg","image/png","image/gif","image/webp"].includes(g)})),!(t!=null&&t.length))return;if(t.length+h(this,x).length>h(this,q)){S.error(`\u6700\u591A\u4E0A\u4F20${h(this,q)}\u4E2A\u6587\u4EF6`);return}let i=function(v,g=null){for(let M=0;M<h(f,x).length;M++)if(h(f,x)[M].obj===g){h(f,x)[M].obj=v;break}};for(let v=0;v<t.length;v++){const g=t[v];if(["image/jpeg","image/png","image/gif","image/bmp","image/webp"].includes(g.type)&&h(this,x).some(M=>M.obj.name===g.name)){if(g.name!=="image.png"){S.error(g.name+" \u6587\u4EF6\u540D\u91CD\u590D\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20");return}}else if(h(this,x).some(M=>M.obj.name===g.name&&M.obj.size===g.size)){S.error(g.name+" \u6587\u4EF6\u540D\u91CD\u590D\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20");return}if(g.size>10*1024*1024){S.error(g.name+" \u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC710M");return}}for(let v=0;v<t.length;v++){const g=t[v];if(h(this,x).push({obj:g,name:g.name,url:p.getBlobUrl(g)}),["image/jpeg","image/png","image/gif","image/bmp","image/webp"].includes(g.type)){var n=document.createElement("canvas"),o=n.getContext("2d"),r=new Image;r.onload=function(){n.width=r.width,n.height=r.height,o.drawImage(r,0,0,n.width,n.height),n.toBlob(function(M){M.size<g.size&&i(new File([M],g.name,{type:g.type}),g)},g.type,.8)},r.src=p.getBlobUrl(g)}}e.preventDefault(),e.stopPropagation(),m(this,U,re).call(this)},x=new WeakMap,U=new WeakSet,re=function(){let e=document.querySelector(`.${this.MyWindowClassName} .describe-img`);e.innerHTML="",h(this,x).length<h(this,q)&&m(this,P,me).call(this),h(this,x).forEach((t,i)=>{var r;let n=document.createElement("div");if(n.className="describe-img-item",(!(t!=null&&t.url)||t.url&&t.url.startsWith("blob:"))&&(n.className+=" uploading"),((r=t==null?void 0:t.obj)==null?void 0:r.type)&&t.obj.type.startsWith("image/")){let d=document.createElement("img");d.src=t.url,n.appendChild(d)}else{let d=document.createElement("span");d.className="describe-img-item-text",d.title=t.obj.name,d.innerText=t.obj.name,n.appendChild(d)}let o=document.createElement("i");o.className="close",o.innerText="\u2573",o.onclick=()=>{h(this,x).splice(i,1),m(this,U,re).call(this)},n.appendChild(o),e.appendChild(n)})},w(y,X),w(y,Z),w(y,Q),w(y,K),w(y,ee),w(y,te),w(y,D),w(y,T),w(y,P),w(y,ie),w(y,$),w(y,U),b(y,"MyWindowClassName",""),b(y,"openTickets"),w(y,E,!1),w(y,q,8),w(y,z,null),w(y,x,[]);function ke(){y.openTickets()}class N{static initialization(){this.initApp()}static initApp(){if(this.unionSourceClick(),this.monitorChangesBody(),this.message(),this.initClick(),localStorage.getItem("openwindow"))this.openDownOrder(localStorage.getItem("openwindow")),localStorage.removeItem("openwindow");else if(!s.option.test&&!this.isPreload&&s.DOMAIN&&document.body){this.isPreload=!0;const e=this.createIframe(s.DOMAIN+"/pay/#/pay/0/0/0",function(){e.remove()});e.style.cssText="overflow: hidden;width: 0;height: 0;position: fixed;z-index: -1;background: transparent;opacity: 0;",document.body.appendChild(e)}}static openDownOrder(e,t=0){let i=this;i.showLoading(),i.identificationValue?i.startDownOrder(e,t):i.getIdentification(!1,function(){const n=new URL(window.location.toString());n.searchParams.get("apsdaiauth")&&(n.searchParams.delete("apsdaiauth"),window.history.replaceState({},"",n.toString()),p.setCookie(i.identificationValue,"1",1)),i.startDownOrder(e,t)})}static startDownOrder(e,t=0){let i=this;if(e=e||i.identificationValue,/micromessenger/i.test(navigator.userAgent.toLowerCase())&&!p.getCookie(i.identificationValue)){localStorage.setItem("openwindow",e),p.setCookie(i.identificationValue,"1",1),window.location=s.DOMAIN+"/api/wechat/website_authorization?&redirect_url="+p.urlencode(window.location.href)+"&identification_value="+i.identificationValue;return}i.Iframe&&i.Iframe.remove(),i.Iframe=i.createIframe(s.DOMAIN+"/pay/#/pay/"+i.identificationValue+"/"+e+"/"+t+`?r=${parseInt(Math.random()*1e4)}`,function(){i.loadingBox.remove()},"downOrderIframe"),clearTimeout(i.IframeInterval),i.IframeInterval=setInterval(()=>{i.Iframe.style.cssText="position: fixed;left: 0px; top: 0px;bottom: 0;right: 0;border: 0px;  overflow: hidden;opacity:1; width: 100%; height: 100%; z-index:99999999;background: transparent;max-width: 100%;max-height: 100%;color-scheme: auto!important"},1e3),document.body.appendChild(i.Iframe)}static monitorChangesBody(){const e=new MutationObserver(n=>{n.forEach(o=>{o.type==="childList"&&o.target.tagName==="BODY"&&this.initClick()})}),t={childList:!0,subtree:!0},i=document.querySelector("body");e.observe(i,t)}static initClick(){let e=this;(()=>{e.clickItem=e.clickItem.length?e.clickItem:[],e.checkoutBtn.forEach(n=>{const o=document.querySelectorAll(`[${n.key}]`);for(let r=0;r<o.length;++r){let d=!1;for(let a=0;a<e.clickItem.length;++a)if(e.clickItem[a]===o[r]){d=!0;break}if(d)continue;let l=o[r];for(const a of n.field)if(l[a])l=l[a];else{l=null;break}if(l){const a=n.verify(l);a&&(e.clickItem.push(o[r]),o[r].addEventListener("click",c=>{var C,L,W,R,v,g;e.pipeline={},(L=(C=o[r])==null?void 0:C.dataset)!=null&&L.apsdaiPay&&(e.pipeline.payType=o[r].dataset.apsdaiPay),(R=(W=o[r])==null?void 0:W.dataset)!=null&&R.apsdaiCoupon&&(e.pipeline.coupon=o[r].dataset.apsdaiCoupon),(g=(v=o[r])==null?void 0:v.dataset)!=null&&g.apsdaiLanguage&&(e.pipeline.Language=o[r].dataset.apsdaiLanguage),e.openDownOrder(a),n.click instanceof Function&&n.click(c)}))}}})})();let i;e.checkoutBtn&&e.checkoutBtn[1]&&(i=e.checkoutBtn[1].verify(window.location.hash)),window.location.hash&&i&&(history.replaceState(null,null," "),e.openDownOrder(i))}static unionSourceClick(){const e=new URL(window.location.toString());if(this.apsUnionSource=e.searchParams.get("aps_affiliate_source"),this.apsUnionSource){const t=e.searchParams.get("aps_affiliate_source_exp");e.searchParams.delete("aps_affiliate_source"),e.searchParams.delete("aps_affiliate_source_exp"),window.history.replaceState({},"",e.toString()),p.setCookie("aps_affiliate_source",this.apsUnionSource,t>0?t:7)}else this.apsUnionSource=p.getCookie("aps_affiliate_source")}static getIdentification(e=!1,t=null){let i=this;i.identificationValue=p.getCookie("identification"),!i.identificationValue||e?Y.GET("/api/pay/identification").then(function(n){n.code===0&&(i.identificationValue=n.data,p.setCookie("identification",i.identificationValue,1),t instanceof Function&&t())}):t instanceof Function&&t()}static message(){let e=this;window.addEventListener("message",function(t){const i=t.data||{};switch(i.action){case"identification":e.common.getIdentification(!0);break;case"close_window":e.Iframe.remove(),clearTimeout(e.IframeInterval),document.body.style.height=e.docBodyStyle.height,document.body.style.overflow=e.docBodyStyle.overflow;break;case"record_click_log":i.data.aps_affiliate_source&&e.common.setCookie("aps_affiliate_source",i.data.aps_affiliate_source,i.data.at>0?i.data.at:7);break;case"initParent":!e.pipeline.Language&&s.option.language&&(e.pipeline.Language=s.option.language);let n={ParentSite:window.location.href,ParentWidth:window.innerWidth,ParentHeight:window.innerHeight,Pipeline:e.pipeline};e.apsUnionSource&&(n.ApsUnionSource=e.apsUnionSource),s.option.TestConfig&&(n.TestConfig=s.option.TestConfig),e.Iframe.contentWindow&&e.Iframe.contentWindow.postMessage({action:"initParent",data:n},t.origin);break}})}static createIframe(e,t,i="iframeName"){const n=document.createElement("iframe");return n.src=e,n.id=i,n.name=i,n.style.cssText="position: fixed;left: 0px; top: 0px;bottom: 0;right: 0;border: 0px;  overflow: hidden;opacity:1; width: 100%; height: 100%; z-index:99999999;background: transparent; max-width: 100%;max-height: 100%;color-scheme: auto!important;",n.onload=function(){typeof t=="function"&&t()},n}static showLoading(){this.loadingBox&&this.loadingBox.remove(),this.loadingBox=document.createElement("div"),this.loadingBox.style.cssText="position: fixed;width: 100%;height: 100%;top: 0;left: 0;z-index: 999999;display: flex;align-items: center;justify-content: center;zoom: 1.5;";let e=document.createElement("div");e.style.cssText="width: 24px;height: 24px;-webkit-animation: clockwise 500ms linear infinite;animation: clockwise 500ms linear infinite;";let t=document.createElement("div");t.style.cssText="position: relative;width: 12px;height: 24px;overflow: hidden;position: absolute;top: 0;left: 0;";let i=document.createElement("div");i.style.cssText="box-sizing: border-box;width: 24px;height: 24px;border: 1.5px solid #409eff;border-radius: 50%;border-left-color: transparent;border-bottom-color: transparent;position: absolute;top: 0;left: 0;background: none;margin: 0;-webkit-animation: donut-rotate 1000ms cubic-bezier(.4, 0, .22, 1) infinite;animation: donut-rotate 1000ms cubic-bezier(.4, 0, .22, 1) infinite;";let n=document.createElement("style");n.textContent="   @-webkit-keyframes clockwise { 0% {-webkit-transform: rotate(0deg)} 100% {-webkit-transform: rotate(360deg)} }  @keyframes clockwise { 0% {transform: rotate(0deg)} 100% {transform: rotate(360deg)} }  @-webkit-keyframes donut-rotate { 0% {-webkit-transform: rotate(0)} 50% {-webkit-transform: rotate(-140deg)} 100% {-webkit-transform: rotate(0)} }  @keyframes donut-rotate { 0% {transform: rotate(0)} 50% {transform: rotate(-140deg)} 100% {transform: rotate(0)} }",t.appendChild(i),e.appendChild(t),this.loadingBox.appendChild(e),this.loadingBox.appendChild(n),document.body.appendChild(this.loadingBox),this.docBodyStyle.height=document.body.style.height,this.docBodyStyle.overflow=document.body.style.overflow,document.body.style.height="100%!important",document.body.style.overflow="hidden"}}b(N,"clickItem",[]),b(N,"pipeline",{}),b(N,"apsUnionSource",""),b(N,"identificationValue",""),b(N,"loadingBox",""),b(N,"Iframe",""),b(N,"IframeInterval",0),b(N,"isPreload",!1),b(N,"docBodyStyle",{height:null,overflow:null}),b(N,"checkoutBtn",[{field:["dataset","apsdaiCheckout"],key:"data-apsdai-checkout",verify:e=>typeof e=="string"?e:!1},{key:"href",field:["href"],verify:e=>{let t;switch(!0){case(typeof e=="string"&&(e.toLowerCase().includes("apsdai#")||e.toLowerCase().includes("apsdai/#"))):return t=e.split("#")[1],t||!1;case(typeof e=="string"&&e.toLowerCase().includes("#apsdai-")):return t=e.split("#apsdai-")[1],t||!1}return!1},click(e){e.preventDefault()}}]);const le=class{static start(){let e=this;if(typeof window.apsdaiLoaded>"u")window.apsdaiLoaded=!0;else if(window.apsdaiLoaded===!0)return;document.readyState==="loading"||document.readyState==="interactive"?(document.readyState==="interactive"?e.initialization():document.addEventListener("DOMContentLoaded",function(){e.initialization()}),window.addEventListener("load",function(){e.initialization()})):e.initialization()}static initialization(e=null){if(s.option==null)if(e)s.option=e;else if(window.Apsdai)s.option=window.Apsdai;else return!1;return s.isInit?(console.error("Apsdai has been initialized"),!1):(s.isInit=!0,m(this,ae,ve).call(this,!0),h(this,ne).call(this,this.imports),!0)}static register(e,t){typeof e!="string"?Object.keys(e).forEach(i=>{this.register(i,e[i])}):this.imports[e]=t}};let I=le;ne=new WeakMap,ae=new WeakSet,ve=function(e=!1){if(s.DOMAIN)return!0;let t;s.option.url?t=s.option.url:s.option.name?t="//"+s.option.name+".apsdai.com":t="",t&&!(t.includes("localhost")||t.includes("127.0.0.1")||t.includes("192.168."))&&t.indexOf("https:")===-1&&(t="https:"+t),s.DOMAIN=t,s.Authorigin=s.option.name,!s.DOMAIN&&e&&S.error("\u521D\u59CB\u5316\u5931\u8D25")},w(I,ae),b(I,"imports",{}),w(I,ne,()=>{Object.values(le.imports).forEach(e=>{e.initialization&&e.initialization()})}),I.register({"modules/WorkOrder":y,"modules/Pay":N}),I.start();function Le(){try{if(!s.isInit){console.error("\u672A\u521D\u59CB\u5316");return}return{openTickets:ke}}catch(k){console.error(k)}}return Le});

window.Apsdai = { name: 'jkme8qm7ox' };